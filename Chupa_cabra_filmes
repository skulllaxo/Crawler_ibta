from bs4 import BeautifulSoup
import requests
import re


url = 'http://www.adorocinema.com/filmes/numero-cinemas/'


def pagina(url = url):
    res = requests.get(url)
    pag = BeautifulSoup(res.text,'html.parser')
    return pag

#print(soup.prettify())
#print(soup.find_all('td')[3].get_text())   
def titulo(pag=pagina()):
    lista_titulos = list()
    for v in pag.find_all('a',class_="meta-title-link"):
        if 'href' in str(v):
            tit = v.get_text()
            lista_titulos.append(tit)
            

    return lista_titulos


def sinopse(pag=pagina()):
    lista_sinopse = list()
    for v in pag.find_all('div',class_="content-txt "):
        sinop = v.get_text()
        lista_sinopse.append(sinop)
    return lista_sinopse
        


def links_pagina(pag=pagina()):
    links = []
    for link in pag.findAll('a', attrs={'href': re.compile("/filmes/")}):
        links.append(link.get('href'))
    return links

def data_lancamento(pag=pagina()):
    data = pag.find_all('span',class_='date')
    for d in data:
        data_lancamento = d.get_text()
        return data_lancamento

for v in links_pagina():
    url2 = f'http://www.adorocinema.com{v}'
    #res = requests.get(url2)
    #pag = BeautifulSoup(res.text,'html.parser')    
    pag = pagina(url=url2)
    print(url2)
    print('titulo',titulo(pag))
    print('sinopse',sinopse(pag))
    print('data lancamento',data_lancamento(pag))
    print('@'*10)
    #print(sinopse())
    #print('##'*40)
